@import "../general-gui/pxToRem";

//-------------------------------------------------------------------------

$de-gamma-table:
  0.0,
  0.0003035269835488375, 0.000607053967097675, 0.0009105809506465125, 0.00121410793419535, 0.0015176349177441874,
  0.001821161901293025, 0.0021246888848418626, 0.0024282158683907, 0.0027317428519395373, 0.003035269835488375,
  0.003346535763899161, 0.003676507324047436, 0.004024717018496307, 0.004391442037410293, 0.004776953480693729,
  0.005181516702338386, 0.005605391624202723, 0.006048833022857054, 0.006512090792594475, 0.006995410187265387,
  0.007499032043226175, 0.008023192985384994, 0.008568125618069307, 0.009134058702220787, 0.00972121732023785,
  0.010329823029626936, 0.010960094006488246, 0.011612245179743885, 0.012286488356915872, 0.012983032342173012,
  0.013702083047289686, 0.014443843596092545, 0.01520851442291271, 0.01599629336550963, 0.016807375752887384,
  0.017641954488384078, 0.018500220128379697, 0.019382360956935723, 0.0202885630566524, 0.021219010376003555,
  0.02217388479338738, 0.02315336617811041, 0.024157632448504756, 0.02518685962736163, 0.026241221894849898,
  0.027320891639074894, 0.028426039504420793, 0.0295568344378088, 0.030713443732993635, 0.03189603307301153,
  0.033104766570885055, 0.03433980680868217, 0.03560131487502034, 0.03688945040110004, 0.0382043715953465,
  0.03954623527673284, 0.04091519690685319, 0.042311410620809675, 0.043735029256973465, 0.04518620438567554,
  0.046665086336880095, 0.04817182422688942, 0.04970656598412723, 0.05126945837404324, 0.052860647023180246,
  0.05448027644244237, 0.05612849004960009, 0.05780543019106723, 0.0595112381629812, 0.06124605423161761,
  0.06301001765316767, 0.06480326669290577, 0.06662593864377289, 0.06847816984440017, 0.07036009569659588,
  0.07227185068231748, 0.07421356838014963, 0.07618538148130785, 0.07818742180518633, 0.08021982031446832,
  0.0822827071298148, 0.08437621154414882, 0.08650046203654976, 0.08865558628577294, 0.09084171118340768,
  0.09305896284668745, 0.0953074666309647, 0.09758734714186246, 0.09989872824711389, 0.10224173308810132,
  0.10461648409110419, 0.10702310297826761, 0.10946171077829933, 0.1119324278369056, 0.11443537382697373,
  0.11697066775851084, 0.11953842798834562, 0.12213877222960187, 0.12477181756095049, 0.12743768043564743,
  0.1301364766903643, 0.13286832155381798, 0.13563332965520566, 0.13843161503245183, 0.14126329114027164,
  0.14412847085805777, 0.14702726649759498, 0.14995978981060856, 0.15292615199615017, 0.1559264637078274,
  0.1589608350608804, 0.162029375639111, 0.1651321945016676, 0.16826940018969075, 0.1714411007328226,
  0.17464740365558504, 0.17788841598362912, 0.18116424424986022, 0.184474994500441, 0.18782077230067787,
  0.19120168274079138, 0.1946178304415758, 0.19806931955994886, 0.20155625379439707, 0.20507873639031693,
  0.20863687014525575, 0.21223075741405523, 0.21586050011389926, 0.2195261997292692, 0.2232279573168085,
  0.22696587351009836, 0.23074004852434915, 0.23455058216100522, 0.238397573812271, 0.24228112246555486,
  0.24620132670783548, 0.25015828472995344, 0.25415209433082675, 0.2581828529215958, 0.26225065752969623,
  0.26635560480286247, 0.2704977910130658, 0.27467731206038465, 0.2788942634768104, 0.2831487404299921,
  0.2874408377269175, 0.29177064981753587, 0.2961382707983211, 0.3005437944157765, 0.3049873140698863,
  0.30946892281750854, 0.31398871337571754, 0.31854677812509186, 0.32314320911295075, 0.3277780980565422,
  0.33245153634617935, 0.33716361504833037, 0.3419144249086609, 0.3467040563550296, 0.35153259950043936,
  0.3564001441459435, 0.3613067797835095, 0.3662525955988395, 0.3712376804741491, 0.3762621229909065,
  0.38132601143253014, 0.386429433787049, 0.39157247774972326, 0.39675523072562685, 0.4019777798321958,
  0.4072402119017367, 0.41254261348390375, 0.4178850708481375, 0.4232676699860717, 0.4286904966139066,
  0.43415363617474895, 0.4396571738409188, 0.44520119451622786, 0.45078578283822346, 0.45641102318040466,
  0.4620769996544071, 0.467783796112159, 0.47353149614800955, 0.4793201831008268, 0.4851499400560704,
  0.4910208498478356, 0.4969329950608704, 0.5028864580325687, 0.5088813208549338, 0.5149176653765214,
  0.5209955732043543, 0.5271151257058131, 0.5332764040105052, 0.5394794890121072, 0.5457244613701866,
  0.5520114015120001, 0.5583403896342679, 0.5647115057049292, 0.5711248294648731, 0.5775804404296506,
  0.5840784178911641, 0.5906188409193369, 0.5972017883637634, 0.6038273388553378, 0.6104955708078648,
  0.6172065624196511, 0.6239603916750761, 0.6307571363461468, 0.6375968739940326, 0.6444796819705821,
  0.6514056374198242, 0.6583748172794485, 0.665387298282272, 0.6724431569576875, 0.6795424696330938,
  0.6866853124353135, 0.6938717612919899, 0.7011018919329731, 0.7083757798916868, 0.7156935005064807,
  0.7230551289219693, 0.7304607400903537, 0.7379104087727308, 0.7454042095403874, 0.7529422167760779,
  0.7605245046752924, 0.768151147247507, 0.7758222183174236, 0.7835377915261935, 0.7912979403326302,
  0.799102738014409, 0.8069522576692516, 0.8148465722161012, 0.8227857543962835, 0.8307698767746546,
  0.83879901174074, 0.846873231509858, 0.8549926081242338, 0.8631572134541023, 0.8713671191987972,
  0.8796223968878317, 0.8879231178819663, 0.8962693533742664, 0.9046611743911496, 0.9130986517934192,
  0.9215818562772946, 0.9301108583754237, 0.938685728457888, 0.9473065367331999, 0.9559733532492861,
  0.9646862478944651, 0.9734452903984125, 0.9822505503331171, 0.9911020971138298, 1.0;

@function de-gamma($n) {
  @return nth($de-gamma-table, round($n * 255)+1);
}

@function luma($c) {
  $rlin: de-gamma(red($c)/255);
  $glin: de-gamma(green($c)/255);
  $blin: de-gamma(blue($c)/255);
  @return (0.2126 * $rlin + 0.7152 * $glin + 0.0722 * $blin) * 100;
}

@function contrast($base-color, $color-1, $color-2, $threshold) {
  $bright-base: luma($base-color);
  $bright-1: luma($color-1);
  $bright-2: luma($color-2);
  @return if(abs($bright-base - $bright-1) > abs($bright-base - $bright-2), $color-1, $color-2);
}

@function hsv($h, $s, $v) {
  @return hsl($h, $s, $v/2);
}

@mixin focus() {
  outline: none;
  border-color: $accent-color;
  box-shadow: 0 0 0 1px $accent-color;
}

$terminal-background-color: #282c34;
$ui-syntax-color: $terminal-background-color;

$ui-s-h: hue($ui-syntax-color);
$ui-s-s: saturation($ui-syntax-color);
$ui-s-l: lightness($ui-syntax-color);
$ui-inv: 10%; // inverse lightness if below


$ui-hue: if($ui-s-s == 0, 220, $ui-s-h);

$ui-saturation: if($ui-s-h <= 80, min($ui-s-s,  5%),
  if(($ui-s-h > 80) and ($ui-s-h < 160), min($ui-s-s, 12%),
  if(($ui-s-h >= 160) and ($ui-s-l < $ui-inv), min($ui-s-s, 48%),
  $ui-s-s)));

$ui-bg-is-syntax: if($ui-s-l >= $ui-inv and $ui-s-l <= 20%, true, false);

$ui-lightness: if($ui-s-l <  $ui-inv, $ui-s-l + 8%, min($ui-s-l, 20%));
$ui-lightness-border: if($ui-s-l <  $ui-inv, $ui-lightness*0.3, $ui-lightness*0.6);

$ui-fg: hsl($ui-hue, min($ui-saturation, 18%), max($ui-lightness*3, 66%) );
$ui-bg: hsl($ui-hue, $ui-saturation, $ui-lightness);
$ui-border: hsl($ui-hue, $ui-saturation, $ui-lightness-border);

$accent-luma: luma( hsl($ui-hue, 50%, 50%) ); // get lightness of current hue

$accent-color: mix( hsl( $ui-hue, 100%, 33%), hsl( $ui-hue, 100%, 70%), $accent-luma ); // mix hsv + hsl (favor mostly hsl)

$accent-text-color: contrast($accent-color, hsl($ui-hue,100%,10%), #fff, 25%);

$accent-bg-color: mix( hsv( $ui-hue, 66%, 66%), hsl( $ui-hue, 66%, 60%),
  $accent-luma * 2 ); // mix hsv + hsl (favor hsl for dark, hsv for light colors)


$accent-bg-text-color:    contrast($accent-bg-color, hsl($ui-hue,100%,10%), #fff, 30% );

$accent-only-text-color: mix( hsv( $ui-hue, 100%, 66%), hsl( $ui-hue, 100%, 77%), $accent-luma);

$level-1-color: lighten($ui-bg, 6%);
$level-2-color: $ui-bg;
$level-3-color: darken($ui-bg, 3%);


//-------------------------------------------------------------------------
// Basic fonts

$font-family: 'coloremoji', 'BlinkMacSystemFont', 'Lucida Grande', 'Segoe UI', Ubuntu, Cantarell, sans-serif !default;

$font-size-base:    1rem !default;
$font-size-small:   ($font-size-base * 0.9) !default;

$line-height-base:  1.428571429 !default; // 20/14
$line-height-computed:    ($font-size-base * $line-height-base) !default;

//-------------------------------------------------------------------------
// Headings
$font-size-h1:      2rem !default;
$font-size-h2:      1.75rem !default;
$font-size-h3:      1.4rem !default;
$font-size-h4:      1.1rem !default;
$font-size-h5:      1rem !default;
$font-size-h6:      0.8rem !default;

$headings-font-family: $font-family !default;
$headings-font-weight:    bold !default;
$headings-line-height:    1.1 !default;
$headings-color:          #ffffff !default;

//-------------------------------------------------------------------------
// General colors

// Default color for all text
$text-color:                $ui-fg !default;
$text-color-subtle:         change-color($text-color, $alpha: alpha($text-color) - 0.4) !default;
$text-minor-color:          darken($text-color, 20%) !default;
$text-highlight-color:      lighten($text-color, 20%) !default;
$text-selected-color:       #fff !default;
$background-highlight-color: rgba(255, 255, 255, 0.07) !default;

// Background color for `<body>`.
$background-color:          $ui-bg !default;
$background-selected-color: $accent-bg-color !default;

$text-muted-color:      mix($text-color, $background-color, 75%) !default;

$brand-primary:         hsl(219,  79%, 66%) !default;
$brand-success:         hsl(140,  44%, 62%) !default;
$brand-info:            hsl(219,  79%, 66%) !default;
$brand-warning:         hsl( 36,  60%, 72%) !default;
$brand-danger:          hsl(  9, 100%, 64%) !default;

$background-primary-color: $accent-bg-color;
$background-success-color: hsl(132, 58%, 40%);
$background-info-color: hsl(208, 88%, 48%);
$background-warning-color: hsl( 42, 88%, 36%);
$background-danger-color: hsl(  5, 64%, 50%);

$brand-text-primary:    #ffffff;
$brand-text-success:    #ffffff;
$brand-text-info:       #ffffff;
$brand-text-warning:    #ffffff;
$brand-text-danger:     #ffffff;

$base-border-color:           $ui-border;


//-------------------------------------------------------------------------
// Links

// Global textual link color.
$link-color:            $brand-primary !default;
// Link hover color set via `darken()` function.
$link-hover-color:      darken($link-color, 15%) !default;
// Link hover decoration.
$link-hover-decoration: underline !default;

//-------------------------------------------------------------------------
//  Buttons
$component-padding-vertical:          pxToRem(10px) !default;
$component-padding-vertical-small:    pxToRem(5px) !default;

$component-padding-horizontal:        pxToRem(12px) !default;
$component-padding-horizontal-small:  pxToRem(10px) !default;

$component-line-height:               $line-height-base !default;
$component-line-height-small:         $line-height-base !default;
$component-background-color:          $text-color-subtle !default;


$border-radius:                       4px !default;
$border-radius-small:                 3px !default;

$button-font-weight:                  normal !default;

$button-border-radius:                $border-radius !default;
$button-border-radius-small:          $border-radius-small !default;

$button-font-size:                    $font-size-base !default;
$button-font-size-small:              $font-size-small !default;

$button-line-height:                  $component-line-height !default;
$button-line-height-small:            $component-line-height-small !default;
$button-padding-vertical:             0.8rem !default;
$button-padding-vertical-small:       0.4rem !default;
$button-padding-horizontal:           0.8rem !default;
$button-padding-horizontal-small:     0.5rem !default;

$button-border-width:                 1px !default;
$button-border-width-small:           1px !default;

$button-default-color:                $text-color !default;
$button-default-bg-color:             $level-1-color !default;
$button-default-border-color:         $base-border-color !default;
$button-default-text-selected-color:  $button-default-color !default;
$button-default-bg-hover-color: lighten($button-default-bg-color, 2%) !default;
$button-default-bg-selected-color: $accent-bg-color !default;

$button-primary-color:        $text-color !default;
$button-primary-bg-color:     $background-primary-color !default;
$button-primary-border-color: darken($button-primary-bg-color, 5%) !default;

$button-success-color:        $text-color !default;
$button-success-bg-color:     $background-success-color !default;
$button-success-border-color: darken($button-success-bg-color, 5%) !default;

$button-info-color:           $text-color !default;
$button-info-bg-color:        $background-info-color !default;
$button-info-border-color:    darken($button-info-bg-color, 5%) !default;

$button-warning-color:        $text-color !default;
$button-warning-bg-color:     $background-warning-color !default;
$button-warning-border-color: darken($button-warning-bg-color, 5%) !default;

$button-danger-color:         $text-color !default;
$button-danger-bg-color:      $background-danger-color !default;
$button-danger-border-color:  darken($button-danger-bg-color, 5%) !default;


//-------------------------------------------------------------------------
// Inputs
$input-font-size:             1.2rem !default;
$input-color:                 $text-color !default;
$input-background-color:      darken($background-color, 6%) !default;
$input-border-color:          $base-border-color !default;
$input-border-radius:         $border-radius !default;
$input-border-focus-color:    $accent-color !default;

$input-padding-vertical:      0.25rem !default;
$input-padding-horizontal:    0.5rem !default;
$input-border-width:          1px !default;
$input-active-bg-color:       mix($accent-bg-color, $input-background-color, 10%) !default;

$select-background-color:       $level-1-color !default;
$select-background-focus-color: lighten($ui-bg, 8%) !default;
$select-background-hover-color: $select-background-focus-color !default;

//-------------------------------------------------------------------------
// Tables
$table-background-color:        transparent !default;
$table-cell-padding:            pxToRem(8px) !default;
$table-border-color:            $base-border-color !default;
$table-border-width:            1px !default;
$table-background-hover-color:  $background-highlight-color !default;

//-------------------------------------------------------------------------
// Badge
$badge-font-weight:             bold !default;
$badge-font-ratio:              0.6;
$badge-font-size:               $badge-font-ratio * 1em !default;
$badge-vertical-padding:        0.2em !default;
$badge-horizontal-padding:      0.5em !default;
$badge-line-height:             1 !default;
$badge-border-radius:           1.5em !default;
$badge-background-color:        lighten($background-highlight-color, 6%) !default;
$badge-color:                   $text-highlight-color !default;
$badge-vertical-align:          1/$badge-font-ratio * $badge-vertical-padding !default;

//-------------------------------------------------------------------------
// Scrollbars
$scrollbar-background-color: $level-3-color !default;
$scrollbar-track-background-color: $level-3-color !default;
$scrollbar-thumb-background-color: lighten($ui-syntax-color, 16%) !default;
$scrollbar-thumb-hover-background-color: lighten($background-color, 40%) !default;
$scrollbar-size: pxToRem(10px) !default;
$scrollbar-radius: pxToRem(5px) !default;
$scrollbar-pad: pxToRem(2px) !default;

//-------------------------------------------------------------------------
// Layouts
$layout-vertical-spacing:   0.5rem !default;
$layout-horizontal-spacing: 0 !default;

//-------------------------------------------------------------------------
// Progress bar
$progress-height: 8px;
$progress-shine-gradient: -webkit-linear-gradient(top, rgba(255, 255, 255, .15), rgba(0, 0, 0, .15));
$progress-background-color: $accent-color;
$progress-background-image: none;
$progress-value-bg-color:   $accent-color;

//-------------------------------------------------------------------------
// Misc but useful
$hr-border-color:             $base-border-color !default;
$panel-body-padding:          pxToRem(15px) !default;
$padding-xs-horizontal:       pxToRem(5px) !default;

$background-alpha: 1;

$root-background-color: $terminal-background-color;

// $dropdown-bg-color: if($extraterm-window-background-mode == "opaque", $level-3-color, $root-background-color);
$dropdown-bg-color: $level-3-color;

$dropdown-link-hover-color:   $text-selected-color !default;
$dropdown-link-hover-bg:      $background-selected-color !default;
$dropdown-border:             $base-border-color !default;
$nav-link-padding:            pxToRem(10px) pxToRem(15px) !default;
$tool-panel-background-color: $level-3-color;
$overlay-background-color:    mix($level-2-color, $level-3-color);
$overlay-border-color:        $background-highlight-color;
$group-text-bg-color:         $button-default-bg-color;

$ui-tab-height: 2.6rem;

$tab-bar-background-color:         $level-3-color;
$tab-bar-border-color:             $base-border-color;
$tab-background-color:             $level-3-color;
$tab-border-color:                 $base-border-color;

$tab-text-color:                   $text-color-subtle;
$tab-text-color-active:            $text-highlight-color;
$tab-text-color-editor:            contrast($ui-syntax-color, darken($ui-syntax-color, 50%), $text-highlight-color, 50%);
$tab-height: $ui-tab-height;

$settings-bg-selected-color: lighten($background-color, 8%) !default;

$tab-background-color-active: if($ui-bg-is-syntax, #00000000, $level-2-color);

$empty-pane-menu-bg-color: $level-3-color;
